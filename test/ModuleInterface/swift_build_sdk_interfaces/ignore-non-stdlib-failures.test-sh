RUN: not %swift_build_sdk_interfaces -sdk %S/Inputs/xfails-sdk/ -v -o %t/output | %FileCheck %s

CHECK-DAG: # (FAIL) PATH((.+/Bad.swiftinterface))
CHECK-DAG: # (PASS) PATH((.+/Good.swiftinterface))

RUN: %swift_build_sdk_interfaces -sdk %S/Inputs/xfails-sdk/ -v -o %t/output -ignore-non-stdlib-failures | %FileCheck -check-prefix=CHECK-IGNORING-FAILURES %s

CHECK-IGNORING-FAILURES-DAG: # (XFAIL) PATH((.+/Bad.swiftinterface))
CHECK-IGNORING-FAILURES-DAG: # (UPASS) PATH((.+/Good.swiftinterface))

RUN: not %swift_build_sdk_interfaces -sdk %S/Inputs/broken-stdlib-sdk/ -v -o %t/output | %FileCheck -check-prefix CHECK-BROKEN-STDLIB %s
RUN: not %swift_build_sdk_interfaces -sdk %S/Inputs/broken-stdlib-sdk/ -v -o %t/output -ignore-non-stdlib-failures | %FileCheck -check-prefix CHECK-BROKEN-STDLIB %s

CHECK-BROKEN-STDLIB: # (FAIL) PATH((.+/Swift.swiftinterface))
CHECK-BROKEN-STDLIB-NOT: {{^}}#

RUN: not %swift_build_sdk_interfaces -sdk %S/Inputs/broken-stdlib-sdk/ -v -o %t/output -skip-stdlib | %FileCheck %s
RUN: %swift_build_sdk_interfaces -sdk %S/Inputs/broken-stdlib-sdk/ -v -o %t/output -skip-stdlib -ignore-non-stdlib-failures | %FileCheck -check-prefix=CHECK-IGNORING-FAILURES %s
